import Callout from 'nextra-theme-docs/callout'
import Video from '../../../components/video'

# Password protected folders

<Video src="/videos/password-demo.mp4" ratio={1246 / 2246} />

## Password protecting a folder/route

You can now protect a folder or directory with passwords.

### Method

- Declare the protected folder's path under `protectedRoutes` (which is an array) in `config/site.json`.
- Create **a plain text file** that is named `.password` (character for character, must be this name), and move this file under the folder that you wish to password protect.
- Open this `.password` file with a text editor, like VS Code or Notepad, and save the password inside (in plain text format).
- Finally, redeploy your onedrive-vercel-index in Vercel so your website picks up the newest protected folder configs.

### Details

If you are wondering what to define in `protectedRoutes`, here is an example.

Suppose we have the following folder structure:

```
.
â”œâ”€â”€ ðŸ“• Books
â”‚   â””â”€â”€ ...
â”œâ”€â”€ ðŸŒž Private folder
â”‚   â”œâ”€â”€ this-is-public
â”‚   â””â”€â”€ u-need-a-password   <-- this is the folder to protect
â”œâ”€â”€ ðŸ¡ Genshin PV
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```

We want to password protect the `/u-need-a-password` directory, so we would write inside `protectedRoutes` the absolute path to root.

```json
"protectedRoutes": [
  "/ðŸŒž Private folder/u-need-a-password",
],
```

If you want to add another route, then add it to the next item in the array.

```json
"protectedRoutes": [
  "/ðŸŒž Private folder/u-need-a-password",
   "/another/route/for/me/to/protect",
],
```

If there is no directory for you to password protect and you want to disable this function, you can simply pass an empty array `[]` to `protectedRoutes`.

```json
"protectedRoutes": [],
```

If you are confused about whether you need to encrypt your password, don't. Put that plain text inside `.password`. Whatever you save inside `.password`, you are going to use as the password for entering the protected directory.

![What to write inside .password](../_images/features/dot-password-file.png)

### Caveats

Yes, all seemingly secure protections come at a cost.

1. The direct link of the files under your protected directory can be shared with the URL parameter `&odpt=<hashed_token>`, if you really want to:

   ```
   https://drive.swo.moe/api/raw/?path=/ðŸŒž%20Private%20folder/u-need-a-password/watch%20this.mp4&odpt=c8ebdc273d673d167c238dd25a997bdf9b4ecbf589452697c1a6cb416b2ed11d
   ```

   Whether or not this exposes your password, protected files, personal information, etc., is all unknown. Use at your own risk.

2. I personally cannot guarantee that this protection is impenetrable and fully secure. Hence, I would not recommend protecting sensitive information with this method. Think of this as an extra layer of annoyance to keep files you want to share with only the people you wish.

<Callout emoji="ðŸ—£">
  More on this in [Password protected routes is now supported
  #66](https://github.com/spencerwooo/onedrive-vercel-index/discussions/66).
</Callout>
